{
    "containerDefinations":[
        {
            "name":"web",
            "image":"sanketkalode/bookapi",
            "essential":true,
            "logConfiguration": { 
                "logDriver": "awslogs",
                "options": { 
                   "awslogs-group" : "/ecs/fargate-task-definition",
                   "awslogs-region": "us-east-1",
                   "awslogs-stream-prefix": "ecs"
                }
             },
             "portMappings": [ 
                { 
                   "containerPort": 5000,
                   "protocol": "tcp"
                }
            ],
            "cpu": 128,
            "memory": 256,
            "environment":[
                {
                    "name":"MONGODB_DATABASE",
                    "value":"BooksDB"
                },
                {
                    "name":"MONGODB_HOSTNAME",
                    "value":"172.31.82.194"
                },
                {
                    "name":"MONGODB_PORT",
                    "value":"27017"
                },
                {
                    "name":"FLASK_ENV",
                    "value":"production"
                }
            ]
        },
        {
            "name": "server",
            "image": "sanketkalode/web-server",
            "essential": true,
            "logConfiguration": { 
                "logDriver": "awslogs",
                "options": { 
                   "awslogs-group" : "/ecs/fargate-task-definition",
                   "awslogs-region": "us-east-1",
                   "awslogs-stream-prefix": "ecs"
                }
             },
             "portMappings": [ 
                { 
                   "containerPort": 80,
                   "protocol": "tcp"
                }
            ],
            "cpu": 128,
            "memory": 256
        }
    ],
    "cpu": "256",
    "family": "fargate-task-definition",
    "memory": "512",
    "networkMode": "awsvpc",
    "runtimePlatform": {
        "operatingSystemFamily": "LINUX"
    },
    "requiresCompatibilities": [ 
        "FARGATE" 
    ]
}